<html>
<head>
    <meta charset="utf-8">
    <title>QR_test</title>
</head>
<body>
    <!-- 條碼顯示的內容顯示在 qr-reader-results -->
    <div id="qr-reader-results"><h1 id="qrtext">123</h1></div>
	<!-- 掃描用 -->
    <div id="qr-reader" style="width:100%"></div>   
</body>
<script src="https://unpkg.com/html5-qrcode"></script>
<script>
    	var lastMessage;
	var codeId = 0;
	const html5QrCode = new Html5Qrcode("qr-reader");
	const qrCodeSuccessCallback = (decodedText, decodedResult) => {
          /* 處理成功掃描 */  
		if (lastMessage !== decodedText) {
		lastMessage = decodedText;
            	++codeId;
		alert(decodedText)
		}
		
          html5QrCode.clear();
     };


	//html5QrCode.applyVideoConstraints({ focusMode: "continuous", advanced: [ {zoom: isAndroid ? 1.5 : 2.0 } ]})
     const config = { fps: 10, qrbox: 800  
		     ,experimentalFeatures: {
                	useBarCodeDetectorIfSupported: true
            		},
		     videoConstraints:{ focusMode: "continuous", advanced: [ {zoom: isAndroid ? 1.5 : 2.0 } ]}
		    };
	// 直接開啟後面鏡頭
	
	html5QrCode.start({ 
	  facingMode: "environment" ,focusMode: "continuous"}, 
	  config, qrCodeSuccessCallback);
</script>
</head>
</html>
